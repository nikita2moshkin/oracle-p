<!DOCTYPE html>  
<html lang="ru">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">  
    <title>ORACLE.P | KINDLE EDITION</title>  
    <style>  
        body, html {  
            margin: 0; padding: 0; width: 100%; height: 100%;  
            background-color: #000; color: #fff; 
            overflow: hidden; text-transform: uppercase;  
            -webkit-user-select: none;  
            font-family: "Helvetica Neue", Arial, sans-serif;
        }  

        body.white-mode { background-color: #fff; color: #000; }
        body.white-mode .line { background-color: #000; }
        
        #canvas { position: relative; width: 100vw; height: 100vh; overflow: hidden; }  
        
        /* Базовый стиль элементов */
        .element { position: absolute; word-wrap: break-word; line-height: 0.8; opacity: 0; transition: opacity 0.4s ease-in-out; }  
        .visible { opacity: 1 !important; }

        /* Шрифты */  
        .f-sans { font-family: "Helvetica Neue", sans-serif; font-weight: 900; letter-spacing: -3px; }
        .f-impact { font-family: "Impact", sans-serif; font-weight: 900; letter-spacing: -1px; } 
        .f-serif { font-family: "Georgia", serif; font-style: italic; text-transform: none; }  
        .f-mono { font-family: "Courier New", monospace; font-weight: 400; letter-spacing: -2px; }  

        /* Статичная P */  
        .giant-p { 
            font-size: 50vh; font-weight: 900; z-index: 0; 
            position: absolute; top: -5%; left: -5%; 
            opacity: 0.4; pointer-events: none; line-height: 0.7;
            transform: none !important; /* Всегда прямо */
        }  
        
        .line { position: absolute; background-color: rgba(255,255,255,0.4); z-index: 1; opacity: 0; }
        .image-container { position: absolute; z-index: 5; filter: invert(1) grayscale(1); mix-blend-mode: difference; }
        .image-container img { width: 100%; height: auto; display: block; image-rendering: pixelated; }

        .hero { z-index: 100; max-width: 90%; font-size: 14vw; }  
        .sub-hero { z-index: 90; max-width: 80%; font-size: 6vw; opacity: 0.8; }
        
        /* Нижняя панель */
        .meta-footer { position: absolute; bottom: 5%; left: 5%; z-index: 110; font-size: 4vw; opacity: 0; }

    </style>  
</head>  
<body onclick="handleInteraction()">  

    <div id="canvas">
        <div class="element giant-p f-impact visible">P</div>
    </div>  

    <script>  
        const slogans = ["PRAY TO THE ROUTER", "SKIBIDI EXISTENTIALISM", "DOSTOEVSKY ON TIKTOK", "SHREK’S PODCAST ABOUT DMT", "TYPOGRAPHY IS PROPAGANDA.", "HELVETICA IS A VIRUS.", "ANCIENT GREEK SHITPOSTING", "WATER IS JUST SOFT ICE.", "JUST F*CK IT", "THE SIMPSONS PREDICTED YOUR DEBT.", "WAKE UP, TATARSKY"];  
        const subtitles = ["Stop thinking about that. It's cringe.", "Your ISP is judging your taste.", "TURN AROUND. SLOWLY. (prank)", "APOLOGIZE TO THE ALGORITHM.", "LICK THE DISPLAY. IT’S SALTY.", "FORGET YOUR MIDDLE NAME.", "The sky is a green screen.", "Say YES/NO to drugs"];
        const meta = ["{status: waiting}", "LMAO", "RESET", "ABORT", "VOID", "BRUH", "0x534F554C", "42", "AMEN", "100%"];  
        
        const imageLibrary = [
            'https://24smi.org/public/media/290x360/celebrity/2016/04/29/1461942758-vanga.jpg',
            'https://i.redd.it/2m5h881d4uh81.jpg',
            'https://images-cdn.ubuy.co.in/63a07047a023683963549705-laminated-pop-art-che-guevara-portrait.jpg',
            'https://png.pngtree.com/png-vector/20231017/ourmid/pngtree-fresh-apple-fruit-red-png-image_10203073.png',
            'https://i.pinimg.com/originals/7e/eb/7a/7eeb7aabf1fd4b18f99f77a70c69a34b.png',
            'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Anonymous_emblem.svg/1280px-Anonymous_emblem.svg.png'
        ];

        let clickCounter = 0;
        const fontClasses = ["f-sans", "f-impact", "f-serif", "f-mono"];

        function handleInteraction() {
            clickCounter++;
            sequentialSpawn();
        }

        // Функция задержки для очереди
        const delay = ms => new Promise(res => setTimeout(res, ms));

        async function sequentialSpawn() {  
            const canvas = document.getElementById('canvas'); 
            const pElement = canvas.querySelector('.giant-p');
            
            // Чистим всё кроме буквы P
            canvas.innerHTML = '';
            canvas.appendChild(pElement);
            
            const isGrid = Math.random() < 0.4;
            const isHardChaos = Math.random() < 0.08;
            document.body.className = (Math.random() < 0.1) ? 'white-mode' : '';

            // 1. СПАУН ЛИНИЙ
            const lineCount = isGrid ? 10 : (isHardChaos ? 15 : 4);
            for (let i = 0; i < lineCount; i++) {
                const line = createLine(isGrid);
                await delay(30);
                line.classList.add('visible');
            }

            // 2. СПАУН КАРТИНОК (Редко, без повторов)
            if (Math.random() < 0.35 || isHardChaos) {
                const count = isHardChaos ? 3 : 1;
                let availableImgs = [...imageLibrary];
                for(let i = 0; i < count; i++) {
                    const idx = Math.floor(Math.random() * availableImgs.length);
                    const img = createImage(availableImgs[idx]);
                    availableImgs.splice(idx, 1);
                    await delay(100);
                    img.classList.add('visible');
                }
            }

            // 3. СПАУН ТЕКСТА
            const textCount = isHardChaos ? 10 : (isGrid ? 2 : Math.floor(Math.random() * 3) + 1);
            for(let i = 0; i < textCount; i++) {
                const isHero = (i === 0 && !isHardChaos);
                const txt = isHero ? slogans[Math.floor(Math.random()*slogans.length)] : 
                            (Math.random() > 0.4 ? subtitles[Math.floor(Math.random()*subtitles.length)] : meta[Math.floor(Math.random()*meta.length)]);
                
                const block = createTextBlock(txt, isHero, isGrid);
                await delay(150);
                block.classList.add('visible');
            }

            // 4. НИЖНИЙ МЕТА-ТЕКСТ
            const footer = createEl('meta-footer f-mono', meta[Math.floor(Math.random()*meta.length)], {});
            await delay(100);
            footer.classList.add('visible');
        }  

        function createEl(cls, txt, styles) {  
            const div = document.createElement('div');  
            div.className = 'element ' + cls;  
            if (txt) div.innerText = txt;  
            Object.assign(div.style, styles);  
            document.getElementById('canvas').appendChild(div);  
            return div;  
        }  

        function createLine(isGrid) {
            const line = document.createElement('div');
            line.className = 'line element';
            const isVert = Math.random() > 0.5;
            if (isVert) {
                line.style.width = '1px'; line.style.height = '100vh';
                line.style.left = isGrid ? (Math.floor(Math.random()*10)*10) + '%' : (Math.random() * 100) + '%';
            } else {
                line.style.width = '100vw'; line.style.height = '1px';
                line.style.top = isGrid ? (Math.floor(Math.random()*10)*10) + '%' : (Math.random() * 100) + '%';
            }
            document.getElementById('canvas').appendChild(line);
            return line;
        }

        function createImage(src) {
            const container = document.createElement('div');
            container.className = 'image-container element';
            // Случайный выбор: супер-большая или обычная
            const isSuperBig = Math.random() < 0.3;
            container.style.width = isSuperBig ? (Math.random() * 40 + 50) + '%' : (Math.random() * 20 + 15) + '%';
            container.style.top = (Math.random() * 50) + '%';
            container.style.left = (Math.random() * 50) + '%';
            
            const img = document.createElement('img');
            img.src = src;
            container.appendChild(img);
            document.getElementById('canvas').appendChild(container);
            return container;
        }

        function createTextBlock(txt, isHero, isGrid) {
            const font = fontClasses[Math.floor(Math.random() * fontClasses.length)];
            const isVertical = !isGrid && Math.random() < 0.2;
            
            const styles = {
                left: isGrid ? (Math.floor(Math.random()*5)*20 + 5) + '%' : (Math.random()*50+5) + '%',
                top: isGrid ? (Math.floor(Math.random()*6)*15 + 10) + '%' : (Math.random()*60+15) + '%',
                transform: isVertical ? 'rotate(90deg)' : `rotate(${(Math.random()*6-3)}deg)`,
                transformOrigin: 'left top'
            };

            const block = createEl(isHero ? `hero ${font}` : `sub-hero ${font}`, txt, styles);
            return block;
        }

        window.onload = sequentialSpawn;  
    </script>  
</body>  
</html>
