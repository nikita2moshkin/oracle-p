<!DOCTYPE html>  
<html lang="ru">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">  
    <title>ORACLE.P | ECAL SWISS SYSTEM</title>  
    <style>  
        body, html {  
            margin: 0; padding: 0; width: 100%; height: 100%;  
            background-color: #000; color: #fff; 
            overflow: hidden; text-transform: uppercase;  
            -webkit-user-select: none;  
            font-family: "Helvetica Neue", Arial, sans-serif;
        }  

        body.white-mode { background-color: #fff; color: #000; }
        body.white-mode .line { background-color: #000; }
        
        #canvas { position: relative; width: 100vw; height: 100vh; overflow: hidden; }  
        .element { position: absolute; word-wrap: break-word; line-height: 0.85; opacity: 0; transition: opacity 0.5s ease-in-out; }  
        .visible { opacity: 1 !important; }

        .f1 { font-family: "Impact", sans-serif; font-weight: 800; letter-spacing: -0.02em; } 
        .f2 { font-family: "Helvetica Neue", sans-serif; font-weight: 200; letter-spacing: 0.05em; } 
        .f3 { font-family: "Georgia", serif; font-style: italic; text-transform: none; } 
        .f4 { font-family: "Courier New", monospace; font-weight: 400; } 
        .f5 { font-family: "Arial Black", sans-serif; font-weight: 800; transform: scaleX(0.9); transform-origin: left; } 
        .f6 { font-family: "Helvetica", sans-serif; font-weight: 900; } 
        .f7 { font-family: "Courier", monospace; font-weight: 700; border-bottom: 0.1em solid currentColor; } 
        .f8 { font-family: "Arial Black", sans-serif; font-weight: 900; letter-spacing: 0.1em; transform: scaleX(1.1); transform-origin: left; } 

        .giant-bg { 
            font-size: 85vh; font-weight: 900; position: absolute;
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #222; opacity: 0.18; z-index: 0; pointer-events: none;
            transition: none !important; 
        }
        body.white-mode .giant-bg { color: #ddd; }

        .line { position: absolute; background-color: rgba(255,255,255,0.15); z-index: 1; }
        .image-container { position: absolute; z-index: 5; filter: grayscale(1) contrast(1.2); mix-blend-mode: difference; }
        .image-shadow { opacity: 0.12 !important; filter: grayscale(1) blur(1px); mix-blend-mode: normal; z-index: -1; }
        .image-container img { width: 100%; height: auto; display: block; }

        .hero { z-index: 100; max-width: 90%; }
        .edge-text { font-size: 1.3vw; z-index: 110; padding: 15px; white-space: nowrap; }
        .vertical { writing-mode: vertical-rl; transform: rotate(180deg); }

        #glitch-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: #000; z-index: 9999; display: none; overflow: hidden;
        }

        .counter-container { 
            position: fixed; bottom: 30px; right: 30px; 
            text-align: right; z-index: 1000; pointer-events: none;
            font-family: "Helvetica", sans-serif; 
        }
        #count-num { font-size: 2vw; font-weight: 900; line-height: 1; }
        #count-phrase { font-size: 0.7vw; opacity: 0; transition: opacity 0.5s; display: block; margin-top: 5px; }
    </style>  
</head>  
<body onclick="handleInteraction()">  

    <div class="counter-container">
        <div id="count-num">0000</div>
        <div id="count-phrase">KEEP SCROLLING</div>
    </div>

    <div id="glitch-overlay"></div>
    <div id="canvas"></div>  

    <script>  
        let totalClicks = 0;
        const phraseLib = ["KEEP SCROLLING", "DON'T STOP", "STAY TUNED"];
        
        function updateCounter() {
            totalClicks++;
            const num = document.getElementById('count-num');
            const phrase = document.getElementById('count-phrase');
            num.innerText = totalClicks.toString().padStart(4, '0');
            if (totalClicks % 5 === 0) {
                phrase.innerText = phraseLib[Math.floor(Math.random() * phraseLib.length)];
                phrase.style.opacity = '1';
                setTimeout(() => { phrase.style.opacity = '0'; }, 2000);
            }
        }

        const slogans = ["PRAY TO THE ROUTER", "SKIBIDI EXISTENTIALISM", "DOSTOEVSKY ON TIKTOK", "SHREK’S PODCAST ABOUT DMT", "TYPOGRAPHY IS PROPAGANDA.", "HELVETICA IS A VIRUS.", "ANCIENT GREEK SHITPOSTING", "WATER IS JUST SOFT ICE.", "JUST F*CK IT", "THE SIMPSONS PREDICTED YOUR DEBT.", "WAKE UP, TATARSKY"]; 
        const subtitles = ["Stop thinking about that. It's cringe.", "Your ISP is judging your taste.", "TURN AROUND. SLOWLY. (prank)", "APOLOGIZE TO THE ALGORITHM.", "LICK THE DISPLAY. IT’S SALTY.", "the algorithm knows what you did in 2014", "FORGET YOUR MIDDLE NAME.", "Are you proud of your cookies?", "[exporting your childhood trauma to Excel]", "The sky is a green screen.", "Say YES/NO to drugs", "Error: reality not found"];
        const math = ["E = mc²", "∇ × E = -∂B/∂t", "iℏ ∂/∂t Ψ = ĤΨ", "Rμν - 1/2Rgμν = Tμν", "S = k ln W", "λ = h/p"];
        const meta = ["{system: active}", "LMAO", "RESET", "ABORT", "VOID", "0x534F554C", "42", "AMEN"];  
        
        const imageLibrary = [
            '',
            'https://upload.wikimedia.org/wikipedia/commons/9/94/Coronavirus._SARS-CoV-2.png',
            'https://png.pngtree.com/png-vector/20231017/ourmid/pngtree-fresh-apple-fruit-red-png-image_10203073.png',
            'https://imageio.forbes.com/blogs-images/booked/files/2011/05/300px-Che_por_Jim_Fitzpatrick.svg_.png?height=295&width=240&fit=bounds',
            'https://static.vecteezy.com/system/resources/previews/053/687/197/non_2x/severely-rotten-apple-with-dark-mold-and-extensive-decay-on-transparent-background-png.png',
            'https://upload.wikimedia.org/wikipedia/commons/2/2c/Octavian_Smigelschi_-_Serafim_%28Cat._Blaj%29%2C_1903.png',
            'https://leonardodavinci.it/wp-content/uploads/2021/10/Leonardo-da-Vinci-Uomo-vitruviano.png',
            'https://www.davincisciencecenter.org/wp-content/uploads/2024/03/Rat-Snake-02.png',
            'https://remihogar.es/cdn/shop/articles/cucaracha-oriental-blatta-orienta_480x.png?v=1761727332',
            'https://static.vecteezy.com/system/resources/thumbnails/029/347/022/small/one-hundred-dollar-bill-falling-or-floating-on-empty-background-transparent-png.png',
            'https://3dgladiator.com/wp-content/themes/dddgladiator/assets/img/teeth-model/intro-model.png',
            'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Dopamine-based-on-xtal-3D-bs-17.png/1280px-Dopamine-based-on-xtal-3D-bs-17.png',
            'https://www.coca-cola.com/content/dam/onexp/ch/de/brands/coca-cola/new-packshots-december-2024/transparent_background_cco_pet.png',
            'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Cube-h.svg/250px-Cube-h.svg.png',
            'https://reference.wolfram.com/language/ref/Files/SphericalPlot3D.en/O_30.png',
            'https://png.pngtree.com/element_pic/16/11/22/825255d6e652ad7777602cdd4e52f4fe.png',
            'https://pngimg.com/d/cow_PNG50583.png',
            'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Illuminati_triangle_eye.png/960px-Illuminati_triangle_eye.png',
            'https://pngimg.com/d/eye_PNG35661.png',
            'https://www.pngarts.com/files/3/Crystal-Pyramid-PNG-Transparent-Image.png'
        ];

        let isLocked = false;
        const fontClasses = ["f1", "f2", "f3", "f4", "f5", "f6", "f7", "f8"];
        const delay = ms => new Promise(res => setTimeout(res, ms));

        function handleInteraction() {
            if (isLocked) return;
            if (Math.random() < 0.04) triggerHardGlitch();
            else sequentialSpawn();
        }

        async function triggerHardGlitch() {
            isLocked = true;
            const overlay = document.getElementById('glitch-overlay');
            overlay.style.display = 'block'; overlay.innerHTML = '';
            for (let i = 0; i < 20; i++) {
                createEl('element visible ' + fontClasses[Math.floor(Math.random()*8)], meta[Math.floor(Math.random()*meta.length)], {
                    left: Math.random()*100+'%', top: Math.random()*100+'%', fontSize: Math.random()*10+'vw'
                }, overlay);
            }
            await delay(1000);
            overlay.style.display = 'none'; isLocked = false;
            sequentialSpawn();
        }

        async function sequentialSpawn() {  
            updateCounter();
            const canvas = document.getElementById('canvas'); 
            canvas.innerHTML = ''; 
            const isChaos = Math.random() < 0.4;
            document.body.className = (Math.random() < 0.15) ? 'white-mode' : '';

            createEl('giant-bg f6 visible', "P", {});

            // --- ФОНОВЫЕ ЭФФЕКТЫ (Мега-вспышка / Вспышка / Тень) ---
            const bgRnd = Math.random();
            if (bgRnd < 0.05) {
                // 5% ШАНС: МЕГА-ВСПЫШКА (Огромная, растворяется)
                const megaSrc = imageLibrary[Math.floor(Math.random()*imageLibrary.length)];
                if(megaSrc) {
                    const megaImg = createImage(megaSrc, 'mega-flash');
                    // Делаем видимой сразу, потом запускаем долгое растворение
                    requestAnimationFrame(() => {
                        megaImg.classList.add('visible');
                        setTimeout(() => { megaImg.style.opacity = '0'; }, 100);
                        setTimeout(() => megaImg.remove(), 3500); // Удаляем после растворения
                    });
                }
            } else if (bgRnd < 0.15) {
                // 10% ШАНС: ОБЫЧНАЯ ВСПЫШКА (Быстрая, переходит в тень)
                const flashSrc = imageLibrary[Math.floor(Math.random()*imageLibrary.length)];
                if(flashSrc) {
                    const flashImg = createImage(flashSrc, 'shadow');
                    flashImg.style.opacity = '0.9'; flashImg.classList.add('visible');
                    setTimeout(() => { flashImg.style.opacity = '0.12'; }, 150);
                }
            } else if (bgRnd < 0.4) {
                // 25% ШАНС: ОБЫЧНАЯ ТЕНЬ
                const shadowImg = createImage(imageLibrary[Math.floor(Math.random()*imageLibrary.length)], 'shadow');
                shadowImg.classList.add('visible');
            }

            const lineCount = isChaos ? 3 : 6;
            for (let i = 0; i < lineCount; i++) createLine(!isChaos).classList.add('visible');
            
            if (!isChaos) {
                for(let i=0; i<3; i++) {
                    createEl('element f4 visible', math[Math.floor(Math.random()*math.length)], {
                        left: Math.random()*80+'%', top: Math.random()*90+'%', fontSize: '1.2vw', opacity: 0.3
                    });
                }
            }

            // ВЫБОР КОМПОЗИЦИИ (Теперь 7 вариантов)
            const mode = Math.random();
            if (mode < 0.2) await layoutSwiss();
            else if (mode < 0.4) await layoutChaos();
            else if (mode < 0.55) await layoutGrid();
            else if (mode < 0.7) await layoutMinimal();
            else if (mode < 0.8) await layoutBurst();   // Новая
            else if (mode < 0.9) await layoutSplit();   // Новая
            else await layoutWildcard();                // Новая (максимум рандома)
        }  

        async function layoutSwiss() {
            createEl('edge-text f6 visible', slogans[Math.floor(Math.random()*slogans.length)], { top: '0', left: '0' });
            createEl('edge-text f2 vertical visible', subtitles[Math.floor(Math.random()*subtitles.length)], { right: '0', top: '0' });
            const hasVerticalRight = Math.random() < 0.4;
            if (hasVerticalRight) {
                const vBlock = createTextBlock(slogans[Math.floor(Math.random()*slogans.length)], true, { 
                    right: '2%', top: '5%', writingMode: 'vertical-rl', transform: 'rotate(180deg)', height: '90vh'
                });
                vBlock.classList.add('visible');
            }
            const block = createTextBlock(slogans[Math.floor(Math.random()*slogans.length)], true, { left: '10%', top: '40%' });
            block.classList.add('visible');
            if (Math.random() > 0.5) {
                const img = createImage(imageLibrary[Math.floor(Math.random()*imageLibrary.length)], 'normal');
                img.style.right = hasVerticalRight ? '20%' : '10%'; 
                img.style.top = '15%'; img.classList.add('visible');
            }
        }

        async function layoutChaos() {
            for(let i=0; i<4; i++) {
                const isHero = i === 0;
                const txt = isHero ? slogans[Math.floor(Math.random()*slogans.length)] : subtitles[Math.floor(Math.random()*subtitles.length)];
                const block = createTextBlock(txt, isHero, {
                    left: Math.random()*50+'%', top: Math.random()*70+'%',
                    transform: `rotate(${(Math.random()-0.5)*20}deg)`, zIndex: 10
                });
                block.classList.add('visible');
                if (Math.random() > 0.6) {
                    const type = Math.random() > 0.7 ? 'big' : 'normal';
                    createImage(imageLibrary[Math.floor(Math.random()*imageLibrary.length)], type).classList.add('visible');
                }
                await delay(100);
            }
        }

        async function layoutGrid() {
            createEl('edge-text f6 visible', slogans[Math.floor(Math.random()*slogans.length)], { top: '10%', left: '10%' });
            createEl('edge-text f4 visible', subtitles[Math.floor(Math.random()*subtitles.length)], { bottom: '10%', left: '10%' });
            const img = createImage(imageLibrary[Math.floor(Math.random()*imageLibrary.length)], 'big');
            img.style.left = '50%'; img.style.top = '20%'; img.classList.add('visible');
            const block = createTextBlock(meta[Math.floor(Math.random()*meta.length)], true, { right: '10%', bottom: '20%' });
            block.classList.add('visible');
        }

        async function layoutMinimal() {
            createLine(false); 
            const txt = slogans[Math.floor(Math.random()*slogans.length)];
            const block = createTextBlock(txt.split(' ')[0], true, { left: '50%', top: '50%', transform: 'translate(-50%, -50%)' });
            block.classList.add('visible');
        }

        async function layoutBurst() {
            // "Взрыв": Центральный текст и разлетающиеся мелкие элементы
            const centerTxt = slogans[Math.floor(Math.random()*slogans.length)];
            createTextBlock(centerTxt, true, { left: '50%', top: '50%', transform: 'translate(-50%, -50%)', zIndex: 20 }).classList.add('visible');
            
            for(let i=0; i<5; i++) {
                const angle = Math.random() * Math.PI * 2;
                const dist = Math.random() * 30 + 20;
                const x = 50 + Math.cos(angle) * dist;
                const y = 50 + Math.sin(angle) * dist;
                createEl('element f7 visible', meta[Math.floor(Math.random()*meta.length)], {
                    left: x+'%', top: y+'%', fontSize: '1vw', transform: `rotate(${angle}rad)`
                });
                await delay(50);
            }
        }

        async function layoutSplit() {
            // "Разделение": Экран делится пополам (вертикально или горизонтально)
            const isVertSplit = Math.random() > 0.5;
            
            // Жирная разделительная линия
            const splitLine = createLine(false);
            splitLine.style.width = isVertSplit ? '10px' : '100vw';
            splitLine.style.height = isVertSplit ? '100vh' : '10px';
            splitLine.style.left = isVertSplit ? '50%' : '0';
            splitLine.style.top = isVertSplit ? '0' : '50%';
            if(isVertSplit) splitLine.style.transform = 'translateX(-50%)'; else splitLine.style.transform = 'translateY(-50%)';

            // Контент по бокам
            const txt = slogans[Math.floor(Math.random()*slogans.length)];
            createTextBlock(txt, true, { 
                left: isVertSplit ? '25%' : '50%', top: isVertSplit ? '50%' : '25%', 
                transform: 'translate(-50%, -50%)', textAlign: 'center', maxWidth: '40%'
            }).classList.add('visible');

            const img = createImage(imageLibrary[Math.floor(Math.random()*imageLibrary.length)], 'normal');
            img.style.left = isVertSplit ? '75%' : '50%'; img.style.top = isVertSplit ? '50%' : '75%';
            img.style.transform = 'translate(-50%, -50%)';
            img.classList.add('visible');
        }

        async function layoutWildcard() {
            // "Дикая карта": Полный рандом количества и типов элементов
            const count = Math.floor(Math.random() * 5) + 3; // От 3 до 7 элементов
            for(let i=0; i<count; i++) {
                if (Math.random() > 0.5) {
                    // Текст
                    const isHero = Math.random() > 0.7;
                    const txt = isHero ? slogans[Math.floor(Math.random()*slogans.length)] : subtitles[Math.floor(Math.random()*subtitles.length)];
                    createTextBlock(txt, isHero, {
                        left: Math.random()*80+'%', top: Math.random()*80+'%',
                        transform: `rotate(${(Math.random()-0.5)*90}deg)` // Сильный поворот
                    }).classList.add('visible');
                } else {
                    // Картинка
                    const type = Math.random() > 0.7 ? 'big' : 'normal';
                    createImage(imageLibrary[Math.floor(Math.random()*imageLibrary.length)], type).classList.add('visible');
                }
                await delay(150); // Задержка появления для динамики
            }
        }

        function createTextBlock(txt, isHero, styles) {
            const block = createEl(isHero ? 'hero' : 'sub-hero', '', styles);
            let baseSize = isHero ? (txt.length > 15 ? 8 : 12) : (Math.random()*2 + 3);
            if (isHero && Math.random() < 0.2) baseSize = 18; 
            block.style.fontSize = baseSize + 'vw';
            txt.split(' ').forEach(word => {
                const span = document.createElement('span');
                span.innerText = word + ' ';
                span.className = fontClasses[Math.floor(Math.random()*8)];
                block.appendChild(span);
            });
            return block;
        }

        function createEl(cls, txt, styles, parent = null) {  
            const div = document.createElement('div');  
            div.className = 'element ' + cls;  
            if (txt) div.innerText = txt;  
            Object.assign(div.style, styles);  
            (parent || document.getElementById('canvas')).appendChild(div);  
            return div;  
        }  

        function createLine(isGrid) {
            const line = document.createElement('div');
            line.className = 'line element visible';
            const isVert = Math.random() > 0.5;
            const weights = ['1px', '1px', '2px', '5px', '15px'];
            const thickness = weights[Math.floor(Math.random() * weights.length)];
            if (isVert) {
                line.style.width = thickness; line.style.height = '100vh';
                line.style.left = isGrid ? (Math.floor(Math.random()*10)*10) + '%' : Math.random()*100 + '%';
            } else {
                line.style.width = '100vw'; line.style.height = thickness;
                line.style.top = isGrid ? (Math.floor(Math.random()*10)*10) + '%' : Math.random()*100 + '%';
            }
            document.getElementById('canvas').appendChild(line);
            return line;
        }

        function createImage(src, type) {
            const container = document.createElement('div');
            container.className = 'image-container element';
            
            if (type === 'shadow') {
                container.classList.add('image-shadow');
                container.style.width = '100vw'; container.style.left = '0'; container.style.top = '0';
            } else if (type === 'mega-flash') {
                // НОВЫЙ ТИП: Огромная, по центру, поверх всего, свое долгое затухание
                container.style.width = '150vw'; container.style.height = '150vh';
                container.style.left = '50%'; container.style.top = '50%';
                container.style.transform = 'translate(-50%, -50%)';
                container.style.zIndex = '50'; 
                container.style.opacity = '1'; // Начинает яркой
                container.style.transition = 'opacity 3s ease-out'; // Медленное растворение
            } else if (type === 'big') {
                container.style.width = (Math.random()*30 + 40) + '%';
                container.style.top = Math.random()*40 + '%'; container.style.left = Math.random()*40 + '%';
            } else {
                container.style.width = (Math.random()*15 + 10) + '%';
                container.style.top = Math.random()*60 + '%'; container.style.left = Math.random()*60 + '%';
            }
            
            const img = document.createElement('img');
            img.src = src;
            container.appendChild(img);
            document.getElementById('canvas').appendChild(container);
            return container;
        }

        window.onload = sequentialSpawn;  
    </script>  
</body>  
</html>
