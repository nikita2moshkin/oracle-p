<script>
    const content = {
        ad: ["UPGRADE SOUL", "BUY THE VOID", "ETERNITY SALE", "KARMA 0% APR", "ISHTAR APPROVED", "GOD IS OFFLINE", "PAY FOR PRAYER"],
        brainrot: ["SKIBIDI NIRVANA", "SIGMA EMPTINESS", "DIGITAL GOONING", "RIZZ THE VOID"],
        system: ["Syncing...", "Error 404", "Loading Afterlife", "v.0.5", "Admin Access Required"],
        glitch: ["0X000_VOID", "$$$$$$$", "___ERR___", "|||||||||"]
    };

    function generate() {
        const canvas = document.getElementById('canvas');
        const old = document.querySelectorAll('.element');
        old.forEach(el => { el.classList.add('ghost'); el.style.opacity = "0.1"; });

        const rand = Math.random() * 100;
        let type = 'ad';
        
        // Новые веса (System теперь реально редкая закуска)
        if (rand > 75) type = 'brainrot';
        if (rand > 90) type = 'system';
        if (rand > 97) type = 'glitch';

        const text = content[type][Math.floor(Math.random() * content[type].length)];
        const el = createEl(type, text);

        // Ценник только для рекламы (Ad)
        if (type === 'ad' && Math.random() > 0.7) {
            createEl('price', "$" + (Math.random() * 999).toFixed(2));
        }

        // Рандомные линии для "швейцарскости"
        if (Math.random() > 0.5) {
            const line = document.createElement('div');
            line.className = 'shape element';
            if(Math.random() > 0.5) {
                line.style.width = '1px'; line.style.height = '100vh';
            } else {
                line.style.width = '100vw'; line.style.height = '1px';
            }
            line.style.left = Math.random() * 100 + '%';
            line.style.top = Math.random() * 100 + '%';
            canvas.appendChild(line);
        }
    }

    function createEl(cls, txt) {
        const div = document.createElement('div');
        div.className = 'element ' + cls;
        div.innerText = txt;
        
        // Вращение теперь только для крупных элементов
        if ((cls === 'ad' || cls === 'brainrot') && Math.random() > 0.85) {
            div.style.transform = "rotate(90deg)";
        }
        
        setPosition(div, cls);
        document.getElementById('canvas').appendChild(div);
        return div;
    }

    function setPosition(el, cls) {
        // Системные данные (закуска) чаще жмутся к углам
        if (cls === 'system') {
            el.style.left = (Math.random() > 0.5 ? '2%' : '70%');
            el.style.top = (Math.random() > 0.5 ? '2%' : '95%');
        } else {
            el.style.left = Math.random() * 60 + 5 + '%';
            el.style.top = Math.random() * 70 + 5 + '%';
        }
    }
</script>
